<h1>RSVP Details</h1>

<%= form_for @family, :url => request.path do |f| %>
  <h2>Your Contact Information</h2>
  <p>Please ensure that we have your correct and complete contact information.</p>
  <div class="input">
    <%= f.label :email %>
    <%= f.text_field :email %>
  </div>
  <div class="input">
    <%= f.label :phone %>
    <%= f.text_field :phone %>
  </div>
  <div class="input">
    <%= f.label :street_address %>
    <%= f.text_area :street_address, :rows => 3 %>
  </div>

  <% unless @invitees.where(:is_invited_ceremony => true).empty? %>
    <h2>Wedding Ceremony</h2>
    <p>Please indicate the people that will be attending the wedding ceremony.</p>
    <%= f.fields_for :people, @invitees do |mf| %>
      <%= mf.check_box :is_attending_ceremony %>
      <%= mf.label :is_attending_ceremony, mf.object.name %>
    <% end %>
  <% end %>

  <h2>Reception</h2>
  <p>Please indicate the people will be attending the reception, and a dinner selection for each person.</p>
  <dl>
  <%= f.fields_for :people, @invitees do |mf| %>
    <dt><%= mf.check_box :is_attending_reception %> <%= mf.object.name %></dt>
    <dd>
      <div class="input meal select">
        <%= mf.label :meal_id, "Dinner choice" %>
        <% if mf.object.adult? %>
          <%= mf.collection_select :meal_id, Meal.where(:is_adult => true), :id, :name, :prompt => true %>
        <% end %>
      </div>
    </dd>
  <% end %>
  </dl>

  <h2>Leave a message</h2>
  <p>If you have any additional comments, questions, or concerns, leave a message here and we'll be in touch.</p>
  <div class="input message">
    <%= f.text_area :rsvp_message, :rows => 5 %>
  </div>
 
  <div class="submit">
    <%= f.submit "Save and continue" %>
  </div>
<% end %>
